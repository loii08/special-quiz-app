{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chanl\\\\Documents\\\\Kenneth\\\\html\\\\client\\\\src\\\\components\\\\QuizModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { spawn as launchConfetti } from '../utils/canvasConfetti.js';\nimport { createFallingEmojis } from '../utils/domAnimations.js';\nimport './QuizModal.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst QuizModal = ({\n  gameData,\n  onSuccess,\n  onClose\n}) => {\n  _s();\n  const [score, setScore] = useState(0);\n  const [currentQuestion, setCurrentQuestion] = useState(null);\n  const [userAnswer, setUserAnswer] = useState('');\n  const [wrongAnswerCount, setWrongAnswerCount] = useState(0);\n  const [availableQuestions, setAvailableQuestions] = useState([]);\n  const [availableWrongMessages, setAvailableWrongMessages] = useState([]);\n  const [availableCancelMessages, setAvailableCancelMessages] = useState([]);\n  const [modalState, setModalState] = useState('asking'); // asking, correct, wrong, cancelled, won\n  const [resultData, setResultData] = useState({\n    emoji: '',\n    msg: ''\n  });\n  const inputRef = useRef(null);\n  const modalContentRef = useRef(null); // Ref for the entire modal content\n  const emojiRef = useRef(null); // Ref for the result emoji element\n\n  const scoreGoal = (gameData === null || gameData === void 0 ? void 0 : gameData.scoreGoal) || 1; // Use scoreGoal from props, with a safe default\n\n  useEffect(() => {\n    if (gameData && gameData.questions.length > 0) {\n      // On initial load, set the available questions and ask the first one.\n      if (availableQuestions.length === 0) {\n        const initialQuestions = [...gameData.questions];\n        setAvailableQuestions(initialQuestions);\n        askNewQuestion(initialQuestions);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [gameData]);\n\n  // Effect to auto-focus the input field when the modal is in the 'asking' state\n  useEffect(() => {\n    if (modalState === 'asking' && inputRef.current) {\n      // Use a small timeout to ensure the element is rendered before focusing\n      setTimeout(() => {\n        inputRef.current.focus();\n      }, 100);\n    }\n  }, [modalState]);\n  const handleAnswerSubmit = () => {\n    // Guard against submitting before a question is loaded\n    if (!userAnswer.trim() || !currentQuestion) return;\n    if (userAnswer.trim().toLowerCase() === currentQuestion.answer.toLowerCase()) {\n      const newScore = score + 1;\n      setScore(newScore);\n      const newQuestionsPool = availableQuestions.filter(q => q._id !== currentQuestion._id); // Use _id from MongoDB\n      setAvailableQuestions(newQuestionsPool);\n      setUserAnswer('');\n      if (newScore >= scoreGoal) {\n        setResultData({\n          emoji: 'ðŸŽ‰',\n          msg: gameData.congratulationsMessage || \"Congratulations! You did it! ðŸŽ‰\"\n        });\n        setModalState('won');\n        // Delay animation to let the modal render\n        setTimeout(() => triggerBurst(200), 50);\n      } else {\n        setResultData({\n          emoji: 'âœ…',\n          msg: `Correct! Only ${scoreGoal - newScore} more to go!`\n        });\n        triggerBurst(80); // Correct answer animation\n        setModalState('correct');\n        // Pre-select the next question from the new, smaller pool\n        if (newQuestionsPool.length > 0) {\n          askNewQuestion(newQuestionsPool);\n        }\n      }\n    } else {\n      setWrongAnswerCount(prevCount => prevCount + 1);\n\n      // Always use the hardcoded default message\n      const randomMsg = {\n        msg: \"That's not quite right. Try again!\",\n        emoji: \"ðŸ¤”\"\n      };\n      setResultData(randomMsg);\n      setModalState('wrong');\n    }\n  };\n  const handleNextQuestion = () => {\n    setUserAnswer('');\n    setModalState('asking');\n  };\n  const handleTryAgain = () => {\n    askNewQuestion(availableQuestions); // Explicitly select a new random question\n    setUserAnswer('');\n    setModalState('asking');\n  };\n  const askNewQuestion = questionsPool => {\n    if (questionsPool.length > 0) {\n      const questionIndex = Math.floor(Math.random() * questionsPool.length);\n      setCurrentQuestion(questionsPool[questionIndex]);\n    }\n  };\n  const handleCancel = () => {\n    // Always use the hardcoded default message\n    const randomMsg = {\n      msg: \"Quitting so soon?\",\n      emoji: \"ðŸ˜œ\"\n    };\n    createFallingEmojis(12); // Use the new falling emoji animation\n    setResultData(randomMsg);\n    setModalState('cancelled');\n  };\n  const triggerBurst = count => {\n    if (modalContentRef.current) {\n      const rect = modalContentRef.current.getBoundingClientRect();\n      launchConfetti(rect.left + rect.width / 2, rect.top + rect.height / 2, count);\n    }\n  };\n  const handleIconClose = () => {\n    // If on the 'wrong' screen, or if they have any wrong answers, show cancel message.\n    if (modalState === 'wrong' || wrongAnswerCount > 0) {\n      handleCancel(); // If on the 'wrong' screen, 'X' should act as 'Cancel'\n    } else {\n      onClose(); // Otherwise, it just closes the modal\n    }\n  };\n  const renderContent = () => {\n    switch (modalState) {\n      case 'correct':\n      case 'wrong':\n      case 'cancelled':\n      case 'won':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"result-modal-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            ref: emojiRef,\n            className: \"result-emoji\",\n            role: \"img\",\n            \"aria-label\": \"Result emoji\",\n            children: resultData.emoji\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: resultData.msg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-buttons\",\n            children: [modalState === 'correct' && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleNextQuestion,\n              children: \"Next Question\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 58\n            }, this), modalState === 'wrong' && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleTryAgain,\n              children: \"Try Again\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 56\n            }, this), modalState === 'cancelled' && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"close-btn\",\n              onClick: onClose,\n              children: \"Okay\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 60\n            }, this), modalState === 'won' && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: onSuccess,\n              children: \"Okay\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 54\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this);\n      case 'asking':\n      default:\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: currentQuestion === null || currentQuestion === void 0 ? void 0 : currentQuestion.question\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-score\",\n            children: [\"Score: \", score, \" / \", scoreGoal]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            ref: inputRef,\n            type: \"text\",\n            value: userAnswer,\n            onChange: e => setUserAnswer(e.target.value),\n            onKeyUp: e => e.key === 'Enter' && handleAnswerSubmit(),\n            placeholder: \"Your answer...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-buttons\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleAnswerSubmit,\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: modalContentRef,\n      className: \"modal-content\",\n      children: [modalState !== 'correct' && modalState !== 'cancelled' && modalState !== 'won' && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"modal-close-icon\",\n        onClick: handleIconClose,\n        \"aria-label\": \"Close modal\",\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }, this), renderContent()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 9\n  }, this);\n};\n_s(QuizModal, \"ECRWhQqTmLGkb+QJWbReEy8ok5E=\");\n_c = QuizModal;\nexport default QuizModal;\nvar _c;\n$RefreshReg$(_c, \"QuizModal\");","map":{"version":3,"names":["React","useState","useEffect","useRef","spawn","launchConfetti","createFallingEmojis","jsxDEV","_jsxDEV","Fragment","_Fragment","QuizModal","gameData","onSuccess","onClose","_s","score","setScore","currentQuestion","setCurrentQuestion","userAnswer","setUserAnswer","wrongAnswerCount","setWrongAnswerCount","availableQuestions","setAvailableQuestions","availableWrongMessages","setAvailableWrongMessages","availableCancelMessages","setAvailableCancelMessages","modalState","setModalState","resultData","setResultData","emoji","msg","inputRef","modalContentRef","emojiRef","scoreGoal","questions","length","initialQuestions","askNewQuestion","current","setTimeout","focus","handleAnswerSubmit","trim","toLowerCase","answer","newScore","newQuestionsPool","filter","q","_id","congratulationsMessage","triggerBurst","prevCount","randomMsg","handleNextQuestion","handleTryAgain","questionsPool","questionIndex","Math","floor","random","handleCancel","count","rect","getBoundingClientRect","left","width","top","height","handleIconClose","renderContent","className","children","ref","role","fileName","_jsxFileName","lineNumber","columnNumber","onClick","question","type","value","onChange","e","target","onKeyUp","key","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/chanl/Documents/Kenneth/html/client/src/components/QuizModal.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { spawn as launchConfetti } from '../utils/canvasConfetti.js';\r\nimport { createFallingEmojis } from '../utils/domAnimations.js';\r\n\r\nimport './QuizModal.css';\r\nconst QuizModal = ({ gameData, onSuccess, onClose }) => {\r\n    const [score, setScore] = useState(0);\r\n    const [currentQuestion, setCurrentQuestion] = useState(null);\r\n    const [userAnswer, setUserAnswer] = useState('');\r\n    const [wrongAnswerCount, setWrongAnswerCount] = useState(0);\r\n    const [availableQuestions, setAvailableQuestions] = useState([]);\r\n    const [availableWrongMessages, setAvailableWrongMessages] = useState([]);\r\n    const [availableCancelMessages, setAvailableCancelMessages] = useState([]);\r\n    const [modalState, setModalState] = useState('asking'); // asking, correct, wrong, cancelled, won\r\n    const [resultData, setResultData] = useState({ emoji: '', msg: '' });\r\n    const inputRef = useRef(null);\r\n    const modalContentRef = useRef(null); // Ref for the entire modal content\r\n    const emojiRef = useRef(null); // Ref for the result emoji element\r\n\r\n    const scoreGoal = gameData?.scoreGoal || 1; // Use scoreGoal from props, with a safe default\r\n\r\n    useEffect(() => {\r\n        if (gameData && gameData.questions.length > 0) {\r\n            // On initial load, set the available questions and ask the first one.\r\n            if (availableQuestions.length === 0) {\r\n                const initialQuestions = [...gameData.questions];\r\n                setAvailableQuestions(initialQuestions);\r\n                askNewQuestion(initialQuestions);\r\n            }\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [gameData]);\r\n\r\n    // Effect to auto-focus the input field when the modal is in the 'asking' state\r\n    useEffect(() => {\r\n        if (modalState === 'asking' && inputRef.current) {\r\n            // Use a small timeout to ensure the element is rendered before focusing\r\n            setTimeout(() => {\r\n                inputRef.current.focus();\r\n            }, 100);\r\n        }\r\n    }, [modalState]);\r\n\r\n    const handleAnswerSubmit = () => {\r\n        // Guard against submitting before a question is loaded\r\n        if (!userAnswer.trim() || !currentQuestion) return;\r\n\r\n        if (userAnswer.trim().toLowerCase() === currentQuestion.answer.toLowerCase()) {\r\n            const newScore = score + 1;\r\n            setScore(newScore);\r\n            \r\n            const newQuestionsPool = availableQuestions.filter(q => q._id !== currentQuestion._id); // Use _id from MongoDB\r\n            setAvailableQuestions(newQuestionsPool);\r\n            setUserAnswer('');\r\n\r\n            if (newScore >= scoreGoal) {\r\n                setResultData({ emoji: 'ðŸŽ‰', msg: gameData.congratulationsMessage || \"Congratulations! You did it! ðŸŽ‰\" });\r\n                setModalState('won');\r\n                // Delay animation to let the modal render\r\n                setTimeout(() => triggerBurst(200), 50);\r\n            } else {\r\n                setResultData({ emoji: 'âœ…', msg: `Correct! Only ${scoreGoal - newScore} more to go!` });\r\n                triggerBurst(80); // Correct answer animation\r\n                setModalState('correct');\r\n                // Pre-select the next question from the new, smaller pool\r\n                if (newQuestionsPool.length > 0) {\r\n                    askNewQuestion(newQuestionsPool);\r\n                }\r\n            }\r\n        } else {\r\n            setWrongAnswerCount(prevCount => prevCount + 1);\r\n\r\n            // Always use the hardcoded default message\r\n            const randomMsg = { msg: \"That's not quite right. Try again!\", emoji: \"ðŸ¤”\" };\r\n            setResultData(randomMsg);\r\n            setModalState('wrong');\r\n        }\r\n    };\r\n\r\n    const handleNextQuestion = () => {\r\n        setUserAnswer('');\r\n        setModalState('asking');\r\n    };\r\n\r\n    const handleTryAgain = () => {\r\n        askNewQuestion(availableQuestions); // Explicitly select a new random question\r\n        setUserAnswer('');\r\n        setModalState('asking');\r\n    };\r\n\r\n    const askNewQuestion = (questionsPool) => {\r\n        if (questionsPool.length > 0) {\r\n            const questionIndex = Math.floor(Math.random() * questionsPool.length);\r\n            setCurrentQuestion(questionsPool[questionIndex]);\r\n        }\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        // Always use the hardcoded default message\r\n        const randomMsg = { msg: \"Quitting so soon?\", emoji: \"ðŸ˜œ\" };\r\n\r\n        createFallingEmojis(12); // Use the new falling emoji animation\r\n        setResultData(randomMsg);\r\n        setModalState('cancelled');\r\n    };\r\n\r\n    const triggerBurst = (count) => {\r\n        if (modalContentRef.current) {\r\n            const rect = modalContentRef.current.getBoundingClientRect();\r\n            launchConfetti(rect.left + rect.width / 2, rect.top + rect.height / 2, count);\r\n        }\r\n    };\r\n\r\n    const handleIconClose = () => {\r\n        // If on the 'wrong' screen, or if they have any wrong answers, show cancel message.\r\n        if (modalState === 'wrong' || wrongAnswerCount > 0) {\r\n            handleCancel(); // If on the 'wrong' screen, 'X' should act as 'Cancel'\r\n        } else {\r\n            onClose(); // Otherwise, it just closes the modal\r\n        }\r\n    };\r\n\r\n    const renderContent = () => {\r\n        switch (modalState) {\r\n            case 'correct':\r\n            case 'wrong':\r\n            case 'cancelled':\r\n            case 'won':\r\n                return (\r\n                    <div className=\"result-modal-content\">\r\n                        <span ref={emojiRef} className=\"result-emoji\" role=\"img\" aria-label=\"Result emoji\">{resultData.emoji}</span>\r\n                        <p>{resultData.msg}</p>\r\n                        <div className=\"modal-buttons\">\r\n                            {modalState === 'correct' && <button onClick={handleNextQuestion}>Next Question</button>}\r\n                            {modalState === 'wrong' && <button onClick={handleTryAgain}>Try Again</button>} \r\n                            {modalState === 'cancelled' && <button className=\"close-btn\" onClick={onClose}>Okay</button>}\r\n                            {modalState === 'won' && <button onClick={onSuccess}>Okay</button>}\r\n                        </div>\r\n                    </div>\r\n                );\r\n            case 'asking':\r\n            default:\r\n                return (\r\n                    <>\r\n                        <h3>{currentQuestion?.question}</h3>\r\n                        <div className=\"modal-score\">Score: {score} / {scoreGoal}</div>\r\n                        <input\r\n                            ref={inputRef}\r\n                            type=\"text\"\r\n                            value={userAnswer}\r\n                            onChange={(e) => setUserAnswer(e.target.value)}\r\n                            onKeyUp={(e) => e.key === 'Enter' && handleAnswerSubmit()}\r\n                            placeholder=\"Your answer...\"\r\n                        />\r\n                        <div className=\"modal-buttons\">\r\n                            <button onClick={handleAnswerSubmit}>Submit</button>\r\n                        </div>\r\n                    </>\r\n                );\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"modal-overlay\">\r\n            <div ref={modalContentRef} className=\"modal-content\">\r\n                {modalState !== 'correct' && modalState !== 'cancelled' && modalState !== 'won' && (\r\n                    <button className=\"modal-close-icon\" onClick={handleIconClose} aria-label=\"Close modal\">\r\n                        &times;\r\n                    </button>\r\n                )}\r\n                {renderContent()}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default QuizModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}