{"ast":null,"code":"import _objectSpread from\"C:/Users/chanl/Documents/Kenneth/html/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect}from'react';import{Link,useNavigate,useParams}from'react-router-dom';import'./CreateQuizPage.css';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||'';const CreateQuizPage=()=>{const{token}=useAuth();const navigate=useNavigate();const{quizId:editQuizId}=useParams();// Get quiz ID from URL for editing\nconst[title,setTitle]=useState('');const[scoreGoal,setScoreGoal]=useState(1);const[anniversaryDate,setAnniversaryDate]=useState('');const[congratulationsMessage,setCongratulationsMessage]=useState('');const[questions,setQuestions]=useState([{question:'',answer:''}]);const[rewardContent,setRewardContent]=useState({imageUrl:'',messageTitle:'',messageBody:''});const[imageUploadStatus,setImageUploadStatus]=useState('');// '', 'uploading', 'success', 'error'\nconst[loading,setLoading]=useState(false);const[formErrors,setFormErrors]=useState({});const[createdQuizId,setCreatedQuizId]=useState(null);const[serverError,setServerError]=useState('');const[copyButtonText,setCopyButtonText]=useState('Copy Link');const titleRef=useRef(null);const scoreGoalRef=useRef(null);const anniversaryDateRef=useRef(null);useEffect(()=>{if(editQuizId){const fetchQuizForEdit=async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/api/quiz/edit/\").concat(editQuizId),{headers:{'x-auth-token':token}});if(!response.ok)throw new Error('Quiz not found for editing.');const data=await response.json();setTitle(data.title);setScoreGoal(data.scoreGoal);setAnniversaryDate(new Date(data.anniversaryDate).toISOString().split('T')[0]);setCongratulationsMessage(data.congratulationsMessage);setQuestions(data.questions);setRewardContent(data.reward.content||{imageUrl:'',messageTitle:'',messageBody:''});}catch(error){console.error(error);navigate('/profile');}};if(token)fetchQuizForEdit();}},[editQuizId,navigate,token]);useEffect(()=>{if(createdQuizId===null&&!editQuizId){setTimeout(()=>{if(titleRef.current){titleRef.current.focus();}},100);}},[createdQuizId,editQuizId]);const handleQuestionChange=(index,event)=>{const newQuestions=[...questions];newQuestions[index][event.target.name]=event.target.value;setQuestions(newQuestions);};const addQuestion=()=>{setQuestions([...questions,{question:'',answer:''}]);};const removeQuestion=index=>{if(questions.length<=scoreGoal){setFormErrors(prevErrors=>_objectSpread(_objectSpread({},prevErrors),{},{questions:\"You cannot have fewer than \".concat(scoreGoal,\" questions.\")}));setTimeout(()=>setFormErrors(prev=>_objectSpread(_objectSpread({},prev),{},{questions:undefined})),3000);return;}const newQuestions=questions.filter((_,i)=>i!==index);setQuestions(newQuestions);};const handleRewardContentChange=e=>{setRewardContent(_objectSpread(_objectSpread({},rewardContent),{},{[e.target.name]:e.target.value}));};const handleImageUpload=async e=>{const file=e.target.files[0];if(!file)return;const formData=new FormData();formData.append('rewardImage',file);setImageUploadStatus('uploading');try{const response=await fetch(\"\".concat(API_URL,\"/api/upload\"),{method:'POST',headers:{'x-auth-token':token},body:formData});const data=await response.json();if(!response.ok)throw new Error(data.msg||'Image upload failed.');setRewardContent(prev=>_objectSpread(_objectSpread({},prev),{},{imageUrl:data.filePath}));setImageUploadStatus('success');}catch(err){console.error(err);setImageUploadStatus('error');}};const validateForm=()=>{const newErrors={};if(!title.trim())newErrors.title='Quiz title is required.';if(!scoreGoal||scoreGoal<1)newErrors.scoreGoal='Score to win must be at least 1.';if(!anniversaryDate)newErrors.anniversaryDate='A special date is required.';const validQuestions=questions.filter(q=>q.question.trim()&&q.answer.trim());if(validQuestions.length<1){newErrors.questions='You must add at least one complete question.';}else if(validQuestions.length<scoreGoal){newErrors.questions=\"You need at least \".concat(scoreGoal,\" valid questions to match your score goal.\");}setFormErrors(newErrors);return newErrors;// Return the errors object\n};const handleSubmit=async e=>{e.preventDefault();const validationErrors=validateForm();if(Object.keys(validationErrors).length>0){if(validationErrors.title){titleRef.current.focus();}else if(validationErrors.scoreGoal){scoreGoalRef.current.focus();}else if(validationErrors.anniversaryDate){anniversaryDateRef.current.focus();}return;}setLoading(true);setServerError('');const quizDataPayload={title,scoreGoal,anniversaryDate,congratulationsMessage,reward:{content:rewardContent},questions:questions.filter(q=>q.question.trim()&&q.answer.trim())};try{const isEditing=!!editQuizId;const url=isEditing?\"\".concat(API_URL,\"/api/quiz/\").concat(editQuizId):\"\".concat(API_URL,\"/api/quiz\");const method=isEditing?'PUT':'POST';const response=await fetch(url,{method:method,headers:{'Content-Type':'application/json','x-auth-token':token},body:JSON.stringify(quizDataPayload)});if(!response.ok){const errData=await response.json();throw new Error(errData.message||'Failed to save quiz.');}if(isEditing){navigate('/profile');}else{const{quizId}=await response.json();setCreatedQuizId(quizId);}}catch(err){console.error(\"Quiz save failed:\",err);setServerError(err.message);}finally{setLoading(false);}};const handleCopyLink=()=>{const url=\"\".concat(window.location.origin,\"/quiz/\").concat(createdQuizId);navigator.clipboard.writeText(url).then(()=>{setCopyButtonText('Copied!');setTimeout(()=>setCopyButtonText('Copy Link'),2000);});};const handleCreateAnother=()=>{setTitle('');setScoreGoal(1);setAnniversaryDate('');setCongratulationsMessage('');setQuestions([{question:'',answer:''}]);setRewardContent({imageUrl:'',messageTitle:'',messageBody:''});setImageUploadStatus('');setFormErrors({});setServerError('');setCopyButtonText('Copy Link');setCreatedQuizId(null);};if(createdQuizId){return/*#__PURE__*/_jsx(\"div\",{className:\"main-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83C\\uDF89 Quiz Created Successfully!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"Share this unique link with someone special.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"link-display-box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:\"\".concat(window.location.origin,\"/quiz/\").concat(createdQuizId),readOnly:true}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCopyLink,className:\"copy-button\",children:copyButtonText})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-buttons\",children:[/*#__PURE__*/_jsx(Link,{to:\"/quiz/\".concat(createdQuizId),className:\"interactive-button\",children:\"Go to Quiz\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateAnother,className:\"secondary-button\",children:\"Create Another Quiz\"})]})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"main-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"back-button\",\"aria-label\":\"Go back to homepage\",children:/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"19\",y1:\"12\",x2:\"5\",y2:\"12\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"12 19 5 12 12 5\"})]})}),/*#__PURE__*/_jsx(\"h1\",{className:\"form-title\",children:editQuizId?'Edit Your Quiz':'Create Your Custom Quiz'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,noValidate:true,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Quiz Title\"}),/*#__PURE__*/_jsx(\"input\",{ref:titleRef,id:\"title\",type:\"text\",placeholder:\"e.g., Our Story\",value:title,onChange:e=>setTitle(e.target.value),className:formErrors.title?'input-error':'',required:true}),formErrors.title&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:formErrors.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"scoreGoal\",children:\"Score to Win\"}),/*#__PURE__*/_jsx(\"input\",{ref:scoreGoalRef,id:\"scoreGoal\",type:\"number\",value:scoreGoal,onChange:e=>setScoreGoal(e.target.value<1?1:e.target.value),min:\"1\",className:formErrors.scoreGoal?'input-error':'',required:true,onBlur:()=>{}}),formErrors.scoreGoal&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:formErrors.scoreGoal})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"anniversaryDate\",children:\"Special Date\"}),/*#__PURE__*/_jsx(\"input\",{ref:anniversaryDateRef,id:\"anniversaryDate\",type:\"date\",value:anniversaryDate,onChange:e=>setAnniversaryDate(e.target.value),className:formErrors.anniversaryDate?'input-error':'',required:true}),formErrors.anniversaryDate&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:formErrors.anniversaryDate})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"congratulationsMessage\",children:\"Custom 'Congratulations' Message (Optional)\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"congratulationsMessage\",placeholder:\"e.g., You're the best!\",value:congratulationsMessage,onChange:e=>setCongratulationsMessage(e.target.value)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"form-section-title\",children:\"Optional Unlocked Content\"}),/*#__PURE__*/_jsx(\"p\",{className:\"reward-info\",children:\"The date countdown is always shown. You can also add an image and/or a special message below to be revealed.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Add an Image (Optional)\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image-upload\",className:\"file-upload-label\",children:imageUploadStatus==='uploading'?'Uploading...':'Choose Image'}),/*#__PURE__*/_jsx(\"input\",{id:\"image-upload\",type:\"file\",onChange:handleImageUpload,accept:\"image/*\",className:\"file-upload-input\"}),imageUploadStatus==='error'&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:\"Upload failed. Please try another image.\"}),rewardContent.imageUrl&&/*#__PURE__*/_jsx(\"div\",{className:\"image-preview-container\",children:/*#__PURE__*/_jsx(\"img\",{src:rewardContent.imageUrl,alt:\"Reward preview\",className:\"image-preview\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Add a Message to the Image/Reward (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"messageTitle\",placeholder:\"Message Title (shown on image)\",value:rewardContent.messageTitle,onChange:handleRewardContentChange}),/*#__PURE__*/_jsx(\"textarea\",{name:\"messageBody\",placeholder:\"Your special message (shown in fullscreen view)...\",value:rewardContent.messageBody,onChange:handleRewardContentChange})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"form-section-title\",children:\"Questions\"}),formErrors.questions&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message error-message-centered\",children:formErrors.questions}),questions.map((q,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"question-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"question-number\",children:index+1}),/*#__PURE__*/_jsxs(\"div\",{className:\"question-inputs\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"question\",type:\"text\",placeholder:\"Enter your question\",value:q.question,onChange:e=>handleQuestionChange(index,e)}),/*#__PURE__*/_jsx(\"input\",{name:\"answer\",type:\"text\",placeholder:\"Enter the answer\",value:q.answer,onChange:e=>handleQuestionChange(index,e)})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeQuestion(index),className:\"remove-question-btn\",\"aria-label\":\"Remove question\",children:/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"polyline\",{points:\"3 6 5 6 21 6\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"10\",y1:\"11\",x2:\"10\",y2:\"17\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"14\",y1:\"11\",x2:\"14\",y2:\"17\"})]})})]},index)),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:addQuestion,className:\"secondary-button\",children:[/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"3\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"5\",x2:\"12\",y2:\"19\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"5\",y1:\"12\",x2:\"19\",y2:\"12\"})]}),\"Add Another Question\"]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"interactive-button\",children:loading?'Creating...':/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72\"})]}),\" \",editQuizId?'Save Changes':'Create & Get Link']})}),serverError&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message error-message-centered\",children:serverError})]})]})});};export default CreateQuizPage;","map":{"version":3,"names":["React","useState","useRef","useEffect","Link","useNavigate","useParams","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_URL","process","env","REACT_APP_API_URL","CreateQuizPage","token","navigate","quizId","editQuizId","title","setTitle","scoreGoal","setScoreGoal","anniversaryDate","setAnniversaryDate","congratulationsMessage","setCongratulationsMessage","questions","setQuestions","question","answer","rewardContent","setRewardContent","imageUrl","messageTitle","messageBody","imageUploadStatus","setImageUploadStatus","loading","setLoading","formErrors","setFormErrors","createdQuizId","setCreatedQuizId","serverError","setServerError","copyButtonText","setCopyButtonText","titleRef","scoreGoalRef","anniversaryDateRef","fetchQuizForEdit","response","fetch","concat","headers","ok","Error","data","json","Date","toISOString","split","reward","content","error","console","setTimeout","current","focus","handleQuestionChange","index","event","newQuestions","target","name","value","addQuestion","removeQuestion","length","prevErrors","_objectSpread","prev","undefined","filter","_","i","handleRewardContentChange","e","handleImageUpload","file","files","formData","FormData","append","method","body","msg","filePath","err","validateForm","newErrors","trim","validQuestions","q","handleSubmit","preventDefault","validationErrors","Object","keys","quizDataPayload","isEditing","url","JSON","stringify","errData","message","handleCopyLink","window","location","origin","navigator","clipboard","writeText","then","handleCreateAnother","className","children","type","readOnly","onClick","to","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","x1","y1","x2","y2","points","onSubmit","noValidate","htmlFor","ref","id","placeholder","onChange","required","min","onBlur","accept","src","alt","map","d","disabled"],"sources":["C:/Users/chanl/Documents/Kenneth/html/client/src/pages/CreateQuizPage.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { Link, useNavigate, useParams } from 'react-router-dom';\r\nimport './CreateQuizPage.css';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || '';\r\n\r\nconst CreateQuizPage = () => {\r\n    const { token } = useAuth();\r\n    const navigate = useNavigate();\r\n    const { quizId: editQuizId } = useParams(); // Get quiz ID from URL for editing\r\n    const [title, setTitle] = useState('');\r\n    const [scoreGoal, setScoreGoal] = useState(1);\r\n    const [anniversaryDate, setAnniversaryDate] = useState('');\r\n    const [congratulationsMessage, setCongratulationsMessage] = useState('');\r\n    const [questions, setQuestions] = useState([{ question: '', answer: '' }]);\r\n    const [rewardContent, setRewardContent] = useState({\r\n        imageUrl: '',\r\n        messageTitle: '',\r\n        messageBody: '',\r\n    });\r\n    const [imageUploadStatus, setImageUploadStatus] = useState(''); // '', 'uploading', 'success', 'error'\r\n    const [loading, setLoading] = useState(false);\r\n    const [formErrors, setFormErrors] = useState({});\r\n    const [createdQuizId, setCreatedQuizId] = useState(null);\r\n    const [serverError, setServerError] = useState('');\r\n    const [copyButtonText, setCopyButtonText] = useState('Copy Link');\r\n\r\n    const titleRef = useRef(null);\r\n    const scoreGoalRef = useRef(null);\r\n    const anniversaryDateRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (editQuizId) {\r\n            const fetchQuizForEdit = async () => {\r\n                try {\r\n                    const response = await fetch(`${API_URL}/api/quiz/edit/${editQuizId}`, {\r\n                        headers: { 'x-auth-token': token }\r\n                    });\r\n                    if (!response.ok) throw new Error('Quiz not found for editing.');\r\n                    const data = await response.json();\r\n                    \r\n                    setTitle(data.title);\r\n                    setScoreGoal(data.scoreGoal);\r\n                    setAnniversaryDate(new Date(data.anniversaryDate).toISOString().split('T')[0]);\r\n                    setCongratulationsMessage(data.congratulationsMessage);\r\n                    setQuestions(data.questions);\r\n                    setRewardContent(data.reward.content || { imageUrl: '', messageTitle: '', messageBody: '' });\r\n\r\n                } catch (error) {\r\n                    console.error(error);\r\n                    navigate('/profile');\r\n                }\r\n            };\r\n            if (token) fetchQuizForEdit();\r\n        }\r\n    }, [editQuizId, navigate, token]);\r\n\r\n    useEffect(() => {\r\n        if (createdQuizId === null && !editQuizId) {\r\n            setTimeout(() => {\r\n                if (titleRef.current) {\r\n                    titleRef.current.focus();\r\n                }\r\n            }, 100);\r\n        }\r\n    }, [createdQuizId, editQuizId]);\r\n\r\n    const handleQuestionChange = (index, event) => {\r\n        const newQuestions = [...questions];\r\n        newQuestions[index][event.target.name] = event.target.value;\r\n        setQuestions(newQuestions);\r\n    };\r\n\r\n    const addQuestion = () => {\r\n        setQuestions([...questions, { question: '', answer: '' }]);\r\n    };\r\n\r\n    const removeQuestion = (index) => {\r\n        if (questions.length <= scoreGoal) {\r\n            setFormErrors(prevErrors => ({\r\n                ...prevErrors,\r\n                questions: `You cannot have fewer than ${scoreGoal} questions.`\r\n            }));\r\n            setTimeout(() => setFormErrors(prev => ({ ...prev, questions: undefined })), 3000);\r\n            return;\r\n        }\r\n        const newQuestions = questions.filter((_, i) => i !== index);\r\n        setQuestions(newQuestions);\r\n    };\r\n\r\n    const handleRewardContentChange = (e) => {\r\n        setRewardContent({ ...rewardContent, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleImageUpload = async (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n\r\n        const formData = new FormData();\r\n        formData.append('rewardImage', file);\r\n\r\n        setImageUploadStatus('uploading');\r\n        try {\r\n            const response = await fetch(`${API_URL}/api/upload`, {\r\n                method: 'POST',\r\n                headers: { 'x-auth-token': token },\r\n                body: formData,\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (!response.ok) throw new Error(data.msg || 'Image upload failed.');\r\n\r\n            setRewardContent(prev => ({ ...prev, imageUrl: data.filePath }));\r\n            setImageUploadStatus('success');\r\n        } catch (err) {\r\n            console.error(err);\r\n            setImageUploadStatus('error');\r\n        }\r\n    };\r\n\r\n    const validateForm = () => {\r\n        const newErrors = {};\r\n        if (!title.trim()) newErrors.title = 'Quiz title is required.';\r\n        if (!scoreGoal || scoreGoal < 1) newErrors.scoreGoal = 'Score to win must be at least 1.';\r\n        if (!anniversaryDate) newErrors.anniversaryDate = 'A special date is required.';\r\n\r\n        const validQuestions = questions.filter(q => q.question.trim() && q.answer.trim());\r\n        if (validQuestions.length < 1) {\r\n            newErrors.questions = 'You must add at least one complete question.';\r\n        } else if (validQuestions.length < scoreGoal) {\r\n            newErrors.questions = `You need at least ${scoreGoal} valid questions to match your score goal.`;\r\n        }\r\n\r\n        setFormErrors(newErrors);\r\n        return newErrors; // Return the errors object\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const validationErrors = validateForm();\r\n        if (Object.keys(validationErrors).length > 0) {\r\n            if (validationErrors.title) {\r\n                titleRef.current.focus();\r\n            } else if (validationErrors.scoreGoal) {\r\n                scoreGoalRef.current.focus();\r\n            } else if (validationErrors.anniversaryDate) {\r\n                anniversaryDateRef.current.focus();\r\n            }\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setServerError('');\r\n\r\n        const quizDataPayload = {\r\n            title,\r\n            scoreGoal,\r\n            anniversaryDate,\r\n            congratulationsMessage,\r\n            reward: { content: rewardContent },\r\n            questions: questions.filter(q => q.question.trim() && q.answer.trim()),\r\n        };\r\n\r\n        try {\r\n            const isEditing = !!editQuizId;\r\n            const url = isEditing \r\n                ? `${API_URL}/api/quiz/${editQuizId}` \r\n                : `${API_URL}/api/quiz`;\r\n            \r\n            const method = isEditing ? 'PUT' : 'POST';\r\n\r\n            const response = await fetch(url, {\r\n                method: method,\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'x-auth-token': token,\r\n                },\r\n                body: JSON.stringify(quizDataPayload),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errData = await response.json();\r\n                throw new Error(errData.message || 'Failed to save quiz.');\r\n            }\r\n\r\n            if (isEditing) {\r\n                navigate('/profile');\r\n            } else {\r\n                const { quizId } = await response.json();\r\n                setCreatedQuizId(quizId);\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Quiz save failed:\", err);\r\n            setServerError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCopyLink = () => {\r\n        const url = `${window.location.origin}/quiz/${createdQuizId}`;\r\n        navigator.clipboard.writeText(url).then(() => {\r\n            setCopyButtonText('Copied!');\r\n            setTimeout(() => setCopyButtonText('Copy Link'), 2000);\r\n        });\r\n    };\r\n\r\n    const handleCreateAnother = () => {\r\n        setTitle('');\r\n        setScoreGoal(1);\r\n        setAnniversaryDate('');\r\n        setCongratulationsMessage('');\r\n        setQuestions([{ question: '', answer: '' }]);\r\n        setRewardContent({ imageUrl: '', messageTitle: '', messageBody: '' });\r\n        setImageUploadStatus('');\r\n        setFormErrors({});\r\n        setServerError('');\r\n        setCopyButtonText('Copy Link');\r\n\r\n        setCreatedQuizId(null);\r\n    };\r\n\r\n    if (createdQuizId) {\r\n        return (\r\n            <div className=\"main-wrapper\">\r\n                <div className=\"card\">\r\n                    <h1>🎉 Quiz Created Successfully!</h1>\r\n                    <p className=\"subtitle\">Share this unique link with someone special.</p>\r\n                    <div className=\"link-display-box\">\r\n                        <input type=\"text\" value={`${window.location.origin}/quiz/${createdQuizId}`} readOnly />\r\n                        <button onClick={handleCopyLink} className=\"copy-button\">{copyButtonText}</button>\r\n                    </div>\r\n                    <div className=\"summary-buttons\">\r\n                        <Link to={`/quiz/${createdQuizId}`} className=\"interactive-button\">Go to Quiz</Link>\r\n                        <button onClick={handleCreateAnother} className=\"secondary-button\">Create Another Quiz</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"main-wrapper\">\r\n            <div className=\"card\">\r\n                <Link to=\"/\" className=\"back-button\" aria-label=\"Go back to homepage\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><line x1=\"19\" y1=\"12\" x2=\"5\" y2=\"12\"></line><polyline points=\"12 19 5 12 12 5\"></polyline></svg>\r\n                </Link>\r\n                <h1 className=\"form-title\">{editQuizId ? 'Edit Your Quiz' : 'Create Your Custom Quiz'}</h1>\r\n                <form onSubmit={handleSubmit} noValidate>\r\n                    <div className=\"form-section\">\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"title\">Quiz Title</label>\r\n                            <input ref={titleRef} id=\"title\" type=\"text\" placeholder=\"e.g., Our Story\" value={title} onChange={e => setTitle(e.target.value)} className={formErrors.title ? 'input-error' : ''} required />\r\n                            {formErrors.title && <span className=\"error-message\">{formErrors.title}</span>}\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"scoreGoal\">Score to Win</label>\r\n                            <input ref={scoreGoalRef} id=\"scoreGoal\" type=\"number\" value={scoreGoal} onChange={e => setScoreGoal(e.target.value < 1 ? 1 : e.target.value)} min=\"1\" className={formErrors.scoreGoal ? 'input-error' : ''} required onBlur={() => {}} />\r\n                            {formErrors.scoreGoal && <span className=\"error-message\">{formErrors.scoreGoal}</span>}\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"anniversaryDate\">Special Date</label>\r\n                            <input ref={anniversaryDateRef} id=\"anniversaryDate\" type=\"date\" value={anniversaryDate} onChange={e => setAnniversaryDate(e.target.value)} className={formErrors.anniversaryDate ? 'input-error' : ''} required />\r\n                            {formErrors.anniversaryDate && <span className=\"error-message\">{formErrors.anniversaryDate}</span>}\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"congratulationsMessage\">Custom 'Congratulations' Message (Optional)</label>\r\n                            <textarea id=\"congratulationsMessage\" placeholder=\"e.g., You're the best!\" value={congratulationsMessage} onChange={e => setCongratulationsMessage(e.target.value)} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-section\">\r\n                        <h3 className=\"form-section-title\">Optional Unlocked Content</h3>\r\n                        <p className=\"reward-info\">The date countdown is always shown. You can also add an image and/or a special message below to be revealed.</p>\r\n                        \r\n                        <div className=\"form-group\">\r\n                            <h4>Add an Image (Optional)</h4>\r\n                            <label htmlFor=\"image-upload\" className=\"file-upload-label\">{imageUploadStatus === 'uploading' ? 'Uploading...' : 'Choose Image'}</label>\r\n                            <input id=\"image-upload\" type=\"file\" onChange={handleImageUpload} accept=\"image/*\" className=\"file-upload-input\" />\r\n                            {imageUploadStatus === 'error' && <p className=\"error-message\">Upload failed. Please try another image.</p>}\r\n                            {rewardContent.imageUrl && <div className=\"image-preview-container\"><img src={rewardContent.imageUrl} alt=\"Reward preview\" className=\"image-preview\" /></div>}\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <h4>Add a Message to the Image/Reward (Optional)</h4>\r\n                            <input type=\"text\" name=\"messageTitle\" placeholder=\"Message Title (shown on image)\" value={rewardContent.messageTitle} onChange={handleRewardContentChange} />\r\n                            <textarea name=\"messageBody\" placeholder=\"Your special message (shown in fullscreen view)...\" value={rewardContent.messageBody} onChange={handleRewardContentChange} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-section\">\r\n                        <h3 className=\"form-section-title\">Questions</h3>\r\n                        {formErrors.questions && <span className=\"error-message error-message-centered\">{formErrors.questions}</span>}\r\n                        {questions.map((q, index) => (\r\n                            <div key={index} className=\"question-row\">\r\n                                <span className=\"question-number\">{index + 1}</span>\r\n                                <div className=\"question-inputs\">\r\n                                    <input name=\"question\" type=\"text\" placeholder=\"Enter your question\" value={q.question} onChange={e => handleQuestionChange(index, e)} />\r\n                                    <input name=\"answer\" type=\"text\" placeholder=\"Enter the answer\" value={q.answer} onChange={e => handleQuestionChange(index, e)} />\r\n                                </div>\r\n                                <button type=\"button\" onClick={() => removeQuestion(index)} className=\"remove-question-btn\" aria-label=\"Remove question\">\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><polyline points=\"3 6 5 6 21 6\"></polyline><path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line></svg>\r\n                                </button>\r\n                            </div>\r\n                        ))}\r\n                        <button type=\"button\" onClick={addQuestion} className=\"secondary-button\">\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line></svg>\r\n                            Add Another Question\r\n                        </button>\r\n                    </div>\r\n\r\n                    <button type=\"submit\" disabled={loading} className=\"interactive-button\">\r\n                        {loading ? 'Creating...' : (\r\n                            <><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72\"></path><path d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72\"></path></svg> {editQuizId ? 'Save Changes' : 'Create & Get Link'}</>\r\n                        )}\r\n                    </button>\r\n                    {serverError && <p className=\"error-message error-message-centered\">{serverError}</p>}\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateQuizPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}